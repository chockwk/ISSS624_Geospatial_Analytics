[
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html",
    "title": "In_class_Ex05",
    "section": "",
    "text": "Learning Objectives:"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#odbus6_9",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#odbus6_9",
    "title": "In_class_Ex05",
    "section": "odbus6_9",
    "text": "odbus6_9\n\nodbus6_9 &lt;- read_rds(\"data/rds/odbus6_9.rds\")\nglimpse(odbus6_9)\n\nRows: 223,123\nColumns: 3\nGroups: ORIGIN_PT_CODE [4,995]\n$ ORIGIN_PT_CODE      &lt;fct&gt; 1012, 1012, 1012, 1012, 1012, 1012, 1012, 1012, 10…\n$ DESTINATION_PT_CODE &lt;fct&gt; 1112, 1113, 1121, 1211, 1311, 7371, 60011, 60021, …\n$ TRIPS               &lt;dbl&gt; 168, 88, 77, 65, 172, 8, 26, 1, 26, 21, 2, 8, 1, 1…"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_nb-weight",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_nb-weight",
    "title": "In_class_Ex05",
    "section": "mpsz_nb (weight)",
    "text": "mpsz_nb (weight)\n\nmpsz_nb &lt;- read_rds(\"data/rds/mpsz_nb.rds\")\nhead(mpsz_nb, n=5)\n\n$by_contiguity\nNeighbour list object:\nNumber of regions: 313 \nNumber of nonzero links: 1902 \nPercentage nonzero weights: 1.94143 \nAverage number of links: 6.076677 \n\n$by_distance\nNeighbour list object:\nNumber of regions: 313 \nNumber of nonzero links: 15422 \nPercentage nonzero weights: 15.74171 \nAverage number of links: 49.27157 \n1 region with no links:\n313\n2 disjoint connected subgraphs\n\n$by_knn\nNeighbour list object:\nNumber of regions: 313 \nNumber of nonzero links: 939 \nPercentage nonzero weights: 0.9584665 \nAverage number of links: 3 \nNon-symmetric neighbours list"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_flow-od-matrix",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_flow-od-matrix",
    "title": "In_class_Ex05",
    "section": "mpsz_flow (OD matrix)",
    "text": "mpsz_flow (OD matrix)\n\nmpsz_flow &lt;- read_rds(\"data/rds/mpsz_flow.rds\")\nglimpse(mpsz_flow)\n\nRows: 97,969\nColumns: 4\n$ ORIGIN_SZ &lt;chr&gt; \"RVSZ05\", \"SRSZ01\", \"MUSZ02\", \"MPSZ05\", \"SISZ01\", \"BMSZ17\", …\n$ DESTIN_SZ &lt;chr&gt; \"RVSZ05\", \"RVSZ05\", \"RVSZ05\", \"RVSZ05\", \"RVSZ05\", \"RVSZ05\", …\n$ DISTANCE  &lt;dbl&gt; 0.0000, 305.7370, 951.8314, 5254.0664, 4975.0021, 3176.1592,…\n$ TRIPS     &lt;dbl&gt; 67, 549, 0, 0, 0, 0, 0, 0, 0, 0, 0, 7, 0, 0, 0, 0, 0, 0, 0, …"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_var-explanatory-variables",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#mpsz_var-explanatory-variables",
    "title": "In_class_Ex05",
    "section": "mpsz_var (explanatory variables)",
    "text": "mpsz_var (explanatory variables)\n\nmpsz_var &lt;- read_rds(\"data/rds/mpsz_var.rds\")\nglimpse(mpsz_var)\n\nRows: 313\nColumns: 14\n$ SZ_NAME        &lt;chr&gt; \"INSTITUTION HILL\", \"ROBERTSON QUAY\", \"FORT CANNING\", \"…\n$ SZ_CODE        &lt;chr&gt; \"RVSZ05\", \"SRSZ01\", \"MUSZ02\", \"MPSZ05\", \"SISZ01\", \"BMSZ…\n$ BUSSTOP_COUNT  &lt;int&gt; 2, 10, 6, 2, 1, 10, 5, 4, 21, 11, 2, 9, 6, 1, 4, 7, 24,…\n$ AGE7_12        &lt;dbl&gt; 330, 320, 0, 0, 200, 0, 0, 0, 350, 470, 0, 300, 390, 0,…\n$ AGE13_24       &lt;dbl&gt; 360, 350, 10, 0, 260, 0, 0, 0, 460, 1160, 0, 760, 890, …\n$ AGE25_64       &lt;dbl&gt; 2260, 2200, 30, 0, 1440, 0, 0, 0, 2600, 6260, 630, 4350…\n$ geometry       &lt;MULTIPOLYGON [m]&gt; MULTIPOLYGON (((28481.45 30..., MULTIPOLYG…\n$ SCHOOL_COUNT   &lt;int&gt; 1, 0, 0, 0, 0, 0, 0, 0, 0, 2, 0, 1, 1, 0, 0, 0, 1, 0, 0…\n$ BUSINESS_COUNT &lt;int&gt; 6, 4, 7, 0, 1, 11, 15, 1, 10, 1, 17, 6, 0, 0, 51, 2, 3,…\n$ RETAILS_COUNT  &lt;int&gt; 26, 207, 17, 0, 84, 14, 52, 0, 460, 34, 263, 55, 37, 1,…\n$ FINSERV_COUNT  &lt;int&gt; 3, 18, 0, 0, 29, 4, 6, 0, 34, 4, 26, 4, 3, 6, 59, 3, 8,…\n$ ENTERTN_COUNT  &lt;int&gt; 0, 6, 3, 0, 2, 0, 0, 0, 1, 0, 0, 0, 0, 0, 3, 0, 0, 0, 0…\n$ FB_COUNT       &lt;int&gt; 4, 38, 4, 0, 38, 15, 5, 0, 20, 0, 9, 25, 0, 0, 9, 1, 3,…\n$ LR_COUNT       &lt;int&gt; 3, 11, 7, 0, 20, 0, 0, 0, 19, 2, 4, 4, 1, 1, 13, 0, 17,…"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-1",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-1",
    "title": "In_class_Ex05",
    "section": "Model 1",
    "text": "Model 1\nThe estimation_method argument must be one of c(“s2sls”, “mle”, “mcmc”, “ols”)\n\nmodel_control_1 &lt;- spflow_control(\n  estimation_method = \"mle\",\n  model = \"model_1\"\n)\n\nmle_model_1 &lt;- spflow(\n  spflow_formula,\n  spflow_networks = mpsz_multi_net,\n  estimation_control = model_control_1\n)\n\nmle_model_1\n\n--------------------------------------------------\nSpatial interaction model estimated by: OLS  \nSpatial correlation structure: SLX (model_1)\nDependent variable: log(1 + TRIPS)\n\n--------------------------------------------------\nCoefficients:\n                          est     sd    t.stat  p.val\n(Intercept)            11.384  0.069   164.255  0.000\n(Intra)                -6.006  0.112   -53.393  0.000\nD_SCHOOL_COUNT          0.093  0.003    28.599  0.000\nD_SCHOOL_COUNT.lag1     0.255  0.006    44.905  0.000\nD_BUSINESS_COUNT        0.001  0.000    10.036  0.000\nD_BUSINESS_COUNT.lag1   0.003  0.000    18.274  0.000\nD_RETAILS_COUNT         0.000  0.000    -1.940  0.052\nD_RETAILS_COUNT.lag1    0.000  0.000    -2.581  0.010\nD_FINSERV_COUNT         0.005  0.000    10.979  0.000\nD_FINSERV_COUNT.lag1   -0.016  0.001   -17.134  0.000\nO_BUSSTOP_COUNT         0.014  0.001    25.865  0.000\nO_BUSSTOP_COUNT.lag1    0.015  0.001    21.728  0.000\nO_AGE25_64              0.000  0.000    14.479  0.000\nO_AGE25_64.lag1         0.000  0.000    14.452  0.000\nP_log(DISTANCE + 1)    -1.281  0.008  -165.327  0.000\n\n--------------------------------------------------\nR2_corr: 0.2831458  \nObservations: 97969  \nModel coherence: Validated\n\n\n\nold_par &lt;- par(mfrow = c(1,3),\n               mar = c(2,2,2,2))\n\nspflow_moran_plots(mle_model_1)"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-8",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-8",
    "title": "In_class_Ex05",
    "section": "Model 8",
    "text": "Model 8\n\nmodel_control_8 &lt;- spflow_control(\n  estimation_method = \"mle\",\n  model = \"model_8\"\n)\n\nmle_model_8 &lt;- spflow(\n  spflow_formula,\n  spflow_networks = mpsz_multi_net,\n  estimation_control = model_control_8\n)\n\nmle_model_8\n\n--------------------------------------------------\nSpatial interaction model estimated by: MLE  \nSpatial correlation structure: SDM (model_8)\nDependent variable: log(1 + TRIPS)\n\n--------------------------------------------------\nCoefficients:\n                          est     sd    t.stat  p.val\nrho_d                   0.689  0.003   196.831  0.000\nrho_o                   0.687  0.004   192.214  0.000\nrho_w                  -0.473  0.003  -142.468  0.000\n(Intercept)             1.086  0.049    22.275  0.000\n(Intra)                 0.840  0.075    11.254  0.000\nD_SCHOOL_COUNT          0.019  0.002     8.896  0.000\nD_SCHOOL_COUNT.lag1     0.019  0.004     5.130  0.000\nD_BUSINESS_COUNT        0.000  0.000     3.328  0.001\nD_BUSINESS_COUNT.lag1   0.000  0.000     1.664  0.096\nD_RETAILS_COUNT         0.000  0.000    -0.414  0.679\nD_RETAILS_COUNT.lag1    0.000  0.000    -0.171  0.864\nD_FINSERV_COUNT         0.002  0.000     6.150  0.000\nD_FINSERV_COUNT.lag1   -0.003  0.001    -4.601  0.000\nO_BUSSTOP_COUNT         0.003  0.000     7.676  0.000\nO_BUSSTOP_COUNT.lag1    0.000  0.000     0.552  0.581\nO_AGE25_64              0.000  0.000     6.870  0.000\nO_AGE25_64.lag1         0.000  0.000    -0.462  0.644\nP_log(DISTANCE + 1)    -0.125  0.005   -22.865  0.000\n\n--------------------------------------------------\nR2_corr: 0.6965973  \nObservations: 97969  \nModel coherence: Validated\n\n\n\nold_par &lt;- par(mfrow = c(1,3),\n               mar = c(2,2,2,2))\n\nspflow_moran_plots(mle_model_8)"
  },
  {
    "objectID": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-9",
    "href": "In_class_Ex/In_class_Ex05/In_class_Ex05.html#model-9",
    "title": "In_class_Ex05",
    "section": "Model 9",
    "text": "Model 9\n\nmodel_control_9 &lt;- spflow_control(\n  estimation_method = \"mle\",\n  model = \"model_9\"\n)\n\nmle_model_9 &lt;- spflow(\n  spflow_formula,\n  spflow_networks = mpsz_multi_net,\n  estimation_control = model_control_9\n)\n\nmle_model_9\n\n--------------------------------------------------\nSpatial interaction model estimated by: MLE  \nSpatial correlation structure: SDM (model_9)\nDependent variable: log(1 + TRIPS)\n\n--------------------------------------------------\nCoefficients:\n                          est     sd   t.stat  p.val\nrho_d                   0.680  0.004  192.554  0.000\nrho_o                   0.678  0.004  187.732  0.000\nrho_w                  -0.396  0.006  -65.591  0.000\n(Intercept)             0.410  0.065    6.266  0.000\n(Intra)                 1.313  0.081   16.263  0.000\nD_SCHOOL_COUNT          0.017  0.002    7.885  0.000\nD_SCHOOL_COUNT.lag1     0.002  0.004    0.551  0.581\nD_BUSINESS_COUNT        0.000  0.000    3.015  0.003\nD_BUSINESS_COUNT.lag1   0.000  0.000   -0.249  0.804\nD_RETAILS_COUNT         0.000  0.000   -0.306  0.759\nD_RETAILS_COUNT.lag1    0.000  0.000    0.152  0.880\nD_FINSERV_COUNT         0.002  0.000    6.787  0.000\nD_FINSERV_COUNT.lag1   -0.002  0.001   -3.767  0.000\nO_BUSSTOP_COUNT         0.002  0.000    6.806  0.000\nO_BUSSTOP_COUNT.lag1   -0.001  0.000   -2.364  0.018\nO_AGE25_64              0.000  0.000    7.336  0.000\nO_AGE25_64.lag1         0.000  0.000   -2.797  0.005\nP_log(DISTANCE + 1)    -0.050  0.007   -6.793  0.000\n\n--------------------------------------------------\nR2_corr: 0.6942944  \nObservations: 97969  \nModel coherence: Validated\n\n\n\nold_par &lt;- par(mfrow = c(1,3),\n               mar = c(2,2,2,2))\n\nspflow_moran_plots(mle_model_9)"
  }
]